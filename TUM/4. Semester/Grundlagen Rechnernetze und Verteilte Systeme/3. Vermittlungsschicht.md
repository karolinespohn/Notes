# Vermittlungsarten
## Leitungsvermittlung
- Eine Leitung wird zwischen Sender und Empfaenger reserviert
- Durch **Signalisierungsnachrichten** wird eine **dedizierte Verbindung** aufgebaut, die von den Parteien exklusiv genuzt wird
- Adressierung wird demnach weitgehend obsolet
- Um den Kanal abzubauen werden erneut **Signalisierungsnachrichten** ausgetauscht
- Die Datenuebertragung ist schnell, der Verbindungsauf- und abbau jedoch oft komplex
- Werden die Kanaele nicht dauerhaft genutzt, kommt werden ressourcen Verschwendet
$$T_{LV} = \frac Lr + 4 \frac{d}{\rho c}$$
## Nachrichtenvermittlung
- Einer Nachricht wird ein **Header** mit **Adressinformationen** vorangestellt, durch die der Empfaenger (ueber mehrere Stationen) eindeutig identifiziert werden kann
 - Ermoeglicht **asynchrone Kommunikation** 
 - **Zeitsparend**, denn Auf- und Abbau entfallen
$$T_{NV} = (n + 1) \cdot \frac{L_h + L}{r} + \frac d{\rho c}$$
## Paketvermittlung
- Nachrichten werden in **Pakete** unterteilt, die einzeln und mit jeweils eigenem Header verschickt werden
- Paketgroessen variieren, es gibt jedoch Obergrenzen
$$T_{PV}= \frac 1r \left ( \left \lceil \frac L{p_{max}}\right \rceil \cdot L_h \cdot L\right) + \frac d{\rho c}+ n \cdot \frac{L_h + p_{max}}{r}$$
# Adressierung im Internet
## Internet Protocol version 4 (IPv4)
![[Beispielnetz.png|500]]
- Jedem Host wird eine 4-Byte **IP-Adresse** zugeordnet, anhand welcher Router Weiterleitungsentscheidungen treffen koennen
- Die ersten 3 Oktette identifizieren dabei das Netzwerk, indem sich der Host befindet, das letzte Oktett identifiziert den Host innerhalb des Netzwerks
### IP-Header
- Pakete enthalten einen IP-Header mit Absender- und Zieladresse
![[Paket Aufbau Layer 3.png|400]]
![[IP-Header.png|500]]
- **Version** gibt die verwendete IP-Version an, wobei gueltige Werte 4 und 6 sind
- Die **Internet Header Length** nimmt Vielfache von 32bit an, und ist wichtig, da einige Felder variable Laengen haben
- Durch den **Type of Service** werden IP-Pakete klassifiziert und priorisiert
- **Total Length** beschreibt die Laenge des Headers und der Payload, und ist begrenzt auf 65535 Byte
- Moegliche Flags sind **Don't Fragment** (Bit 17) und **More Fragments** (Bit 18), wodurch angegeben wird, dass mehr Fragmente folgen
- **Fragment Offset** gibt an, wo im unfragmentierten Paket sich dasFragment befindet
- Eine Nachricht wird verworfen, wenn das **Time to Live** Feld 0 erreicht
- **Protocol** identifiziert das Protokoll auf Schicht 4 (zB TCP oder UDP)
- Durch die **Checksum** koennen Fehler erkannt aber nicht korrigiert werden
- **Options** sind beispielsweise Zeitstempel, Route Recordings,...
### Offene Probleme
#### Adressaufloesung
- Ist einem Sender nur die IP-Zieladresse bekannt, aber nicht die MAC-Adresse, so sendet der Sender eine ARP-Request an die MAC-Broadcast Adresse
- Der gewuenschte Empfaenger schickt eine Unicast ARP-Reply mit seiner MAC-Adresse
- Liegen Sender und Empfaenger in unterschiedlichen Netzen, schickt der Sender das Paket an das **Default Gateway**
- Der Router akzeptiert das Paket und leitet es weiter an den Empfaenger, was moeglicherweise einen weiteren ARP-Schritt erfordert
![[Adressaufloesung.png|500]]